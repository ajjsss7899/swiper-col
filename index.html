<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>타이틀</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="swiper.min.css">
<script src="swiper.js"></script>

<style>
* {margin: 0;padding: 0;box-sizing: border-box;}
ul, li {list-style: none;}

.slider {overflow: hidden;max-width: 1180px;margin: 20px auto 0;}
.slide_list .swiper-slide {display:flex;flex-wrap:wrap;}
.slide_list .list {width: 33.333%;height: 150px;text-align: center;background: #ddd;}
</style>
</head>
<body>
<!-- swiper-slide -->
<div class="slider">
    <div class="swiper-wrapper slide_list">
        <div class="list">slider1</div>
        <div class="list">slider2</div>
        <div class="list">slider3</div>
        <div class="list">slider4</div>
        <div class="list">slider5</div>
        <div class="list">slider6</div>
        <div class="list">slider7</div>
        <div class="list">slider8</div>
        <div class="list">slider9</div>
        <div class="list">slider10</div>
        <div class="list">slider11</div>
        <div class="list">slider12</div>
        <div class="list">slider13</div>
        <div class="list">slider14</div>
    </div>
</div>

<div class="slider">
    <div class="swiper-wrapper slide_list">
        <div class="list">slider1</div>
        <div class="list">slider2</div>
        <div class="list">slider3</div>
        <div class="list">slider4</div>
        <div class="list">slider5</div>
        <div class="list">slider6</div>
        <div class="list">slider7</div>
        <div class="list">slider8</div>
        <div class="list">slider9</div>
        <div class="list">slider10</div>
        <div class="list">slider11</div>
        <div class="list">slider12</div>
        <div class="list">slider13</div>
        <div class="list">slider14</div>
    </div>
</div>


<script>
    $(document).ready(function () {
        slideAct();
    })

    function slideAct(){
        var col = 0;

        var slideArr = []
        var realInx = []
        var realInx2 = []

       sliderStart();

       var winWChk = ''; //디바이스 체크 변수
        //디바이스 체크
        if (window.innerWidth > 768){ //PC 버전
            winWChk = 'pc';
        }else{ //mobile 버전
            winWChk = 'mo';
        }

        $(window).on('resize', function (){
            winW = window.innerWidth;
            if(winWChk != 'mo' && winW < 768){ //모바일 버전으로 전환할 때
                sliderStart()
                winWChk = 'mo';
            }

            if(winWChk != 'pc' && winW > 768){ //PC 버전으로 전환할 때
                sliderStart()
                winWChk = 'pc';
            }
        }) 

        function sliderStart(){
            if ($('.slider .list').parent().hasClass('swiper-slide')){
                $('.slider .list').unwrap('swiper-slide');
            }
            
            $(".slider").each(function(index){
                if (window.innerWidth > 768){ //PC 버전
                    col = 6;
                }else{ //mobile 버전
                    col = 3;
                }
                var num = 0;

                $(this).addClass("slider-" + index);
                $(".slider-" + index).find('.list').each(function(i) {
                    $(this).addClass("list"+(Math.floor((i+col)/col)));
                    num = Math.floor((i+col)/col)
                    
                }).promise().done(function(){
                   for (var i = 1; i < num+1; i++) {
                       $(".slider-" + index).find('.list'+i+'').wrapAll('<div class="swiper-slide"></div>');
                       $(".slider-" + index).find('.list'+i+'').removeClass('list'+i+'')
                    }
                });
            }).promise().done(function(){
                slider()
                
            });
        }

        function slider(){
            $(".slider").each(function(index){
                realInx.push(0);
                realInx2.push(0);
                slideArr.push(undefined);

                if(slideArr[index] != undefined) {
                    slideArr[index].destroy();
                    slideArr[index] == undefined;
                }
                slideArr[index] = new Swiper('.slider-' + index , {
                    slidesPerView: 1,
                    initialSlide :0,
                    resistanceRatio : 0,
                    on: {
                        slideChange: function () {
                            realInx[index] = this.realIndex*col
                        
                        }
                    },

                    
                });

                if(slideArr[index] == undefined) {
                    slideArr.push(swiper)
                }
                realInx2[index] = realInx[index];
                slideArr[index].slideTo(Math.floor(realInx[index]/col));
                realInx[index] = realInx2[index];
            }); 
        }
    }

</script>
</body>
</html>