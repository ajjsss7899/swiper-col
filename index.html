<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>타이틀</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="swiper.min.css">
<script src="swiper.js"></script>

<style>
* {margin: 0;padding: 0;box-sizing: border-box;}
ul, li {list-style: none;}

.slider {overflow: hidden;max-width: 1180px;margin: 20px auto 0;}
.slide_list .swiper-slide {display:flex;flex-wrap:wrap;}
.slide_list .list {width: 33.333%;height: 150px;text-align: center;background: #ddd;}
</style>
</head>
<body>
<!-- swiper-slide -->
<div class="slider">
    <div class="swiper-wrapper slide_list">
        <div class="list">slider1</div>
        <div class="list">slider2</div>
        <div class="list">slider3</div>
        <div class="list">slider4</div>
        <div class="list">slider5</div>
        <div class="list">slider6</div>
        <div class="list">slider7</div>
        <div class="list">slider8</div>
        <div class="list">slider9</div>
        <div class="list">slider10</div>
        <div class="list">slider11</div>
        <div class="list">slider12</div>
        <div class="list">slider13</div>
        <div class="list">slider14</div>
    </div>
</div>

<div class="slider">
    <div class="swiper-wrapper slide_list">
        <div class="list">slider1</div>
        <div class="list">slider2</div>
        <div class="list">slider3</div>
        <div class="list">slider4</div>
        <div class="list">slider5</div>
        <div class="list">slider6</div>
        <div class="list">slider7</div>
        <div class="list">slider8</div>
        <div class="list">slider9</div>
    </div>
</div>

<script>
    $(document).ready(function () {
        sliderStart(slider);
    })

    

    function sliderStart(callbak,swiper){
        //슬라이드 초기화 
        if (swiper != undefined){ 
            swiper.destroy();
            swiper = undefined;
        }

        if ($('.slider .list').parent().hasClass('swiper-slide')){
            $('.slider .list').unwrap('swiper-slide');
        }
        
        $(".slider").each(function(index){
            var col = 0;
            if (window.innerWidth > 768){ //PC 버전
                col = 9;
            }else{ //mobile 버전
                col = 3;
            }
            var num = 0;
            
            $(this).addClass("slider-" + index);

            $(".slider-" + index).find('.list').each(function(i) {
                $(this).addClass("list"+(Math.floor((i+col)/col)));
                num = Math.ceil(i/col);
            }).promise().done(function(){
                for (var i = 1; i < num+1; i++) {
                   $(".slider-" + index).find('.list'+i+'').wrapAll('<div class="swiper-slide"></div>');
                   $(".slider-" + index).find('.list'+i+'').removeClass('list'+i+'')
                }
                callbak()
            });
        })

       
    }

    function slider(){
        var winWChk = ''; //디바이스 체크 변수
        $(".slider").each(function(index){
            var $this = $(this);
            //슬라이드 인덱스 클래스 추가

            var winW = window.innerWidth; //화면 가로사이즈
            var swiper = undefined;
            var slideInx = 0; //현재 슬라이드 index
            
            //디바이스 체크
            if (window.innerWidth > 768){ //PC 버전
                winWChk = 'pc';
            }else{ //mobile 버전
                winWChk = 'mo';
            }

            sliderAct(); //슬라이드 실행

            $(window).on('resize', function (){
                winW = window.innerWidth;
                if(winWChk != 'mo' && winW < 768){ //모바일 버전으로 전환할 때
                    if (index == $(".slider").length-1){
                        sliderStart(slider,swiper);
                        winWChk = 'mo';
                    }
                }

                if(winWChk != 'pc' && winW > 768){ //PC 버전으로 전환할 때
                    if (index == $(".slider").length-1){
                        sliderStart(slider,swiper);
                        winWChk = 'pc';
                    }
                }
            })
            
            function sliderAct(){
                swiper = new Swiper('.slider-' + index , {
                    slidesPerView: 1,
                    initialSlide :slideInx,
                    on: {
                        activeIndexChange: function () {
                            slideInx = this.realIndex; //현재 슬라이드 index 갱신
                        }
                    },
                });
            }
        });
    }



</script>
</body>
</html>